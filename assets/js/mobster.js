$(document).ready((function(){$(".owl-carousel").owlCarousel({items:3,center:!0,nav:!0,dots:!1,loop:!0})})),wow=new WOW,wow.init(),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".stripe-overlay"),t=document.getElementById("usernamePopup"),n=document.querySelector(".close"),o=document.getElementById("usernameCheckForm"),s=document.getElementById("successMessage"),r=document.getElementById("errorMessage"),a=document.getElementById("networkErrorMessage");document.getElementById("registeredCheckbox").addEventListener("change",(function(n){this.checked&&(t.style.display="none",e.remove())})),e.addEventListener("click",(function(e){e.stopPropagation(),t.style.display="flex",s.style.display="none",r.style.display="none",a.style.display="none"})),n.addEventListener("click",(function(e){e.stopPropagation(),t.style.display="none"})),t.addEventListener("click",(function(e){e.target===t&&(t.style.display="none")})),document.querySelector(".popup-content").addEventListener("click",(function(e){e.stopPropagation()})),o.addEventListener("submit",(async function(n){n.preventDefault();var o=document.getElementById("usernamePopupInput"),l=o.value.replace(/[^A-Za-z0-9]/g,"");o.value=l,s.style.display="none",r.style.display="none",a.style.display="none";try{const n=await fetch("https://verified-nostr.com/.well-known/nostr.json"),o=await n.json();o.names&&o.names.hasOwnProperty(l)?r.style.display="block":(s.style.display="block",setTimeout((function(){t.style.display="none",e.remove()}),1e3))}catch(e){a.textContent="Error: "+e.message,a.style.display="block"}}))})),document.getElementById("nostr-form").addEventListener("submit",(async function(e){e.preventDefault();let t=document.getElementById("username").value.trim();const n=document.getElementById("nostrKey"),o=n.value.trim(),s=document.querySelector('[name="h-captcha-response"]').value,r=document.getElementById("success-message"),a=document.getElementById("success-username-placeholder");document.querySelectorAll(".alert-danger").forEach((function(e){e.style.display="none"})),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");let l=null;if(n.checkValidity()?s||(l=document.getElementById("error-captcha")):l=document.getElementById("error-key-invalid"),l)return l.style.display="block",void(r.style.display="none");try{const e=await fetch("https://verified-nostr.com/.well-known/nostr.json");if((await e.json()).names.hasOwnProperty(t))throw l=document.getElementById("error-taken"),new Error;const n=await fetch("https://api.verified-nostr.com",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,nostrKey:o,captchaResponse:s})});if(!n.ok){const e=await n.json();throw new Error(e.error||"An unknown error occurred.")}await n.json();a.textContent=t+"@verified-nostr.com",r.style.display="block"}catch(e){l=l||document.getElementById("error-unknown"),l.style.display="block",r.style.display="none"}})),document.addEventListener("DOMContentLoaded",(e=>{const t=document.createElement("link");t.setAttribute("rel","canonical"),t.setAttribute("href",window.location.origin+window.location.pathname),document.head.appendChild(t)}));